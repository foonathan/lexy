<!doctype html><html lang=en-US><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>lexy/callback/bind.hpp â€” lexy</title><style>:root{--white:white;--background-color:#fdfdfd;--default-color:#101010;--heading-color:#0A0A0A;--link-color:#2A2A2A;--gray-highlight-color:#aaaaaa;--highlight-color:#2861ce}@media(prefers-color-scheme:dark){:root{--white:#202020;--background-color:#222222;--default-color:#efefef;--heading-color:#f5f5f5;--link-color:#d5d5d5;--gray-highlight-color:#555555}}nav#menu div.menu-container,main{max-width:1250px;margin:0 auto;padding:0 10px}@media(min-width:800px){article{max-width:900px;padding:0 10px}}html{position:relative;min-height:100%;margin:0;padding:0}body{font-family:serif;font-size:18px;color:var(--default-color);background-color:var(--background-color);width:100%;padding:0;margin:0}main{margin-bottom:75px;display:flex;justify-content:center}h1,h2,h3,h4,h5,h6{font-family:sans-serif;font-weight:700;line-height:1.15em;color:var(--heading-color);margin:0 0 .4em;hyphens:auto}h1{font-size:2em}h2{font-size:1.75em}h3{font-size:1.5em}h4{font-size:1.25em}h5{font-size:1.15em}h6{font-size:1.1em}a,a svg,button svg{color:var(--link-color);fill:var(--link-color);stroke:var(--link-color);transition:color ease .3s}a:hover,button:hover{color:var(--highlight-color)}a:hover svg,button:hover svg{color:var(--highlight-color);fill:var(--highlight-color);stroke:var(--highlight-color)}a:focus,button:focus{outline:none}br{margin:1em}article{flex:1;min-width:0}article p,article ul,article ol,article dl,article td{hyphens:auto;text-align:justify}nav#menu{width:100%;padding:0;background-color:var(--white);border-bottom:2px solid var(--highlight-color);font-family:sans-serif;font-size:1.3em}nav#menu div.menu-container{display:flex}nav#menu div.menu-container ul{display:flex;flex-direction:row;align-items:center;padding:0;list-style:none}nav#menu div.menu-container ul li a{text-decoration:none}nav#menu div.menu-container ul li a svg{height:1em}nav#menu div.menu-container ul li a.active{border-width:0 0 2px;border-style:solid;border-color:var(--highlight-color)}nav#menu div.menu-container ul#home{padding-left:0;padding-right:10px}nav#menu div.menu-container ul#home .title{font-weight:700}nav#menu div.menu-container ul#main{margin-left:auto}nav#menu div.menu-container ul#main li{padding-left:20px}@media(max-width:600px){nav#menu div.menu-container ul#main{flex-direction:column;align-items:flex-end;margin:5px 10px 0 auto}}footer#page-footer{position:absolute;bottom:0;left:0;right:0;height:2em;display:flex;justify-content:space-between;font-size:.8em;font-weight:200;line-height:1em;border-top:1px solid #ccc}footer#page-footer section{padding-left:1em;padding-right:1em;padding-top:.5em;width:100%}footer#page-footer .copyright{text-align:left}footer#page-footer .poweredby{text-align:right}@media(max-width:450px){footer#page-footer{flex-direction:column;align-items:flex-start}footer#page-footer section{text-align:initial!important;width:initial}}aside.toc{display:none}@media(min-width:1100px){aside.toc{display:initial;position:sticky;top:0;min-width:200px;max-width:350px;padding-right:1em;align-self:flex-start;hyphens:auto}aside.toc header{margin-top:1em;font-weight:700}aside.toc ul{list-style:none;padding:0}aside.toc ul ul{padding-left:1em;padding-bottom:.2em}aside.toc ul li{padding-bottom:.2em}aside.toc a{text-decoration:none}}article form svg,article a svg,article i svg{height:1em;position:relative;top:2px;padding-right:3px}article p svg:not(:first-child){padding-left:.25em}article header{margin-top:1em;margin-bottom:1em}article header nav{display:flex;flex-wrap:wrap}article header nav a{text-decoration:none;padding-right:7px}@media(min-width:700px){article header nav form.search{margin-left:auto}}article header nav form.search input[type=search]{padding:2px;width:250px}article header nav form.search input[type=search]:focus{border-color:var(--highlight-color);outline:solid var(--highlight-color)1px}article header nav form.search button[type=submit]{margin-left:-25px;border:none;background:initial}article .lead p{font-weight:500;font-size:1.1em}article .admonitionblock{margin-bottom:1em}article .admonitionblock td.icon{font-weight:700}article .admonitionblock td.content div:first-child p{margin-top:0}article .admonitionblock td.content div:last-child p{margin-bottom:0}@media(max-width:600px){article .admonitionblock tr{display:block;float:left;padding-left:.5em;padding-right:.5em}article .admonitionblock tr td{display:block}}@media(min-width:600px){article .admonitionblock td.icon{width:75px;text-align:center;border-right:1px solid var(--gray-highlight-color)}article .admonitionblock td.content{padding-left:.5em}}article .exampleblock{margin-top:1em;margin-bottom:1em}article .exampleblock .title{font-style:italic}article a.github-example{text-decoration:none}article a.github-example svg{height:.8em;position:relative;top:2px}article .playground-example .title,article .godbolt-example .title{position:relative}article .playground-example .title a,article .godbolt-example .title a{position:absolute;top:7px;right:7px}article .playground-example .title a svg,article .godbolt-example .title a svg{height:1em}article details{margin-bottom:1em}article details summary{font-style:italic}article ul p,article ol p{margin:.2em}article div ul:not(:first-child),article div ol:not(:first-child){margin-top:0}article dl dt{margin-top:.5em;font-weight:700}article dl dd p,article dl dd div:only-child ul{margin:0;padding:0}article div dl:not(:first-child){margin-top:0}article table.tableblock{background:var(--white);margin:0 auto;border-collapse:collapse}article table.tableblock td,article table.tableblock th{border:1px solid var(--gray-highlight-color);padding:5px;text-align:left}article table.tableblock td p,article table.tableblock th p{margin:0}article div.sidebarblock{border:1px solid var(--gray-highlight-color);padding:.75em;margin:1em}article div.sidebarblock p{margin:0}article code{font-family:Inconsolata,monospace,sans-serif}article pre{margin-top:0;overflow:auto;padding:10px;background:var(--white);border:1px solid var(--gray-highlight-color);line-height:1.1}article .colist{margin-top:-.5em}article .colist ol{counter-reset:list}article .colist ol li{counter-increment:list;padding-left:1em}article .colist ol ::marker{content:"(" counter(list)")";font-weight:700}article .colist p{margin:0}.highlight .tok-c,.highlight .tok-cm,.highlight .tok-cp,.highlight .tok-c1,.highlight .tok-cs,.ace_editor .tok-c,.ace_editor .tok-cm,.ace_editor .tok-cp,.ace_editor .tok-c1,.ace_editor .tok-cs{color:#998;font-style:italic;font-weight:initial}.highlight .tok-k,.highlight .tok-kc,.highlight .tok-kd,.highlight .tok-kp,.highlight .tok-kr,.highlight .tok-kt,.highlight .ace_storage,.highlight .ace_keyword,.ace_editor .tok-k,.ace_editor .tok-kc,.ace_editor .tok-kd,.ace_editor .tok-kp,.ace_editor .tok-kr,.ace_editor .tok-kt,.ace_editor .ace_storage,.ace_editor .ace_keyword{color:#458;font-style:initial;font-weight:700}.highlight .tok-o,.highlight .tok-p,.highlight .ace_keyword.ace_operator,.highlight .ace_paren,.highlight .ace_punctuation,.ace_editor .tok-o,.ace_editor .tok-p,.ace_editor .ace_keyword.ace_operator,.ace_editor .ace_paren,.ace_editor .ace_punctuation{color:red;font-style:initial;font-weight:initial}.highlight .ace_dsl,.ace_editor .ace_dsl{pointer-events:auto}.highlight .tok-m,.highlight .tok-mf,.highlight .tok-mh,.highlight .tok-mi,.highlight .tok-mo,.highlight .ace_constant,.ace_editor .tok-m,.ace_editor .tok-mf,.ace_editor .tok-mh,.ace_editor .tok-mi,.ace_editor .tok-mo,.ace_editor .ace_constant{color:#ff8000;font-style:initial;font-weight:initial}.highlight .tok-s,.highlight .tok-sb,.highlight .tok-sc,.highlight .tok-sd,.highlight .tok-s2,.highlight .tok-s3,.highlight .tok-sh,.highlight .tok-si,.highlight .tok-sx,.highlight .tok-sr,.highlight .tok-s1,.highlight .tok-ss,.highlight .tok-se,.highlight .ace_string,.ace_editor .tok-s,.ace_editor .tok-sb,.ace_editor .tok-sc,.ace_editor .tok-sd,.ace_editor .tok-s2,.ace_editor .tok-s3,.ace_editor .tok-sh,.ace_editor .tok-si,.ace_editor .tok-sx,.ace_editor .tok-sr,.ace_editor .tok-s1,.ace_editor .tok-ss,.ace_editor .tok-se,.ace_editor .ace_string{color:green;font-style:initial;font-weight:initial}.highlight .tok-cp,.highlight .tok-cpf,.ace_editor .tok-cp,.ace_editor .tok-cpf{color:green;font-style:initial;font-weight:700}.highlight .tok-err,.highlight .ace_invalid,.ace_editor .tok-err,.ace_editor .ace_invalid{color:red;font-style:initial;font-weight:initial}.highlight strong,.ace_editor strong{font-weight:initial}.highlight strong:not(:empty)::before,.ace_editor strong:not(:empty)::before{content:"*";color:red}.highlight strong:not(:empty)::after,.ace_editor strong:not(:empty)::after{content:"*";color:red}</style></head><body><nav id=menu><div class=menu-container><ul id=home><li><a href=/><span class=title>lexy:</span> C++ parsing DSL</a></li></ul><ul id=main><li><a href=/learn/>Learn</a></li><li><a href=/reference/>Reference</a></li><li><a href=/playground/>Playground</a></li><li><a href=/download/>Download</a></li><li><a href=https://github.com/foonathan/lexy title=GitHub><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" role="img" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></a></li></ul></div></nav><main><aside class=toc><header><a href=#>Table of Contents</a></header></aside><article id=doc><header><h1>Header <code>lexy/callback/bind.hpp</code></h1><nav><a href=https://github.com/foonathan/lexy/blob/main/include/lexy/callback/bind.hpp><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" role="img" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> View source
</a><a href="https://github.com/foonathan/lexy/issues/new?title=lexy%2fcallback%2fbind.hpp"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bug" class="svg-inline--fa fa-bug fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M511.988 288.9c-.478 17.43-15.217 31.1-32.653 31.1H424v16c0 21.864-4.882 42.584-13.6 61.145l60.228 60.228c12.496 12.497 12.496 32.758.0 45.255-12.498 12.497-32.759 12.496-45.256.0l-54.736-54.736C345.886 467.965 314.351 480 280 480V236c0-6.627-5.373-12-12-12h-24c-6.627.0-12 5.373-12 12v244c-34.351.0-65.886-12.035-90.636-32.108l-54.736 54.736c-12.498 12.497-32.759 12.496-45.256.0-12.496-12.497-12.496-32.758.0-45.255l60.228-60.228C92.882 378.584 88 357.864 88 336v-16H32.666C15.23 320 .491 306.33.013 288.9-.484 270.816 14.028 256 32 256h56v-58.745l-46.628-46.628c-12.496-12.497-12.496-32.758.0-45.255 12.498-12.497 32.758-12.497 45.256.0L141.255 160h229.489l54.627-54.627c12.498-12.497 32.758-12.497 45.256.0 12.496 12.497 12.496 32.758.0 45.255L424 197.255V256h56c17.972.0 32.484 14.816 31.988 32.9zM257 0c-61.856.0-112 50.144-112 112h224C369 50.144 318.856.0 257 0z"/></svg> Report an issue
</a><a href=https://github.com/foonathan/lexy/edit/main/docs/content/reference/callback/bind.adoc><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="edit" class="svg-inline--fa fa-edit fa-w-18" role="img" viewBox="0 0 576 512"><path fill="currentcolor" d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8.0zm162-22.9-48.8-48.8c-15.2-15.2-39.9-15.2-55.2.0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8.0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2.0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5.0 112v352c0 26.5 21.5 48 48 48h352c26.5.0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"/></svg> Edit this page</a><form class=search id=dsl-goto-form><input type=search id=dsl-goto-search placeholder="Go to..." list=dsl-goto-data autocomplete=off>
<button type=submit title=Go><svg viewBox="0 0 448 512"><path d="M438.6 278.6c12.5-12.5 12.5-32.8.0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3.0s-12.5 32.8.0 45.3L338.8 224H32c-17.7.0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8.0 45.3s32.8 12.5 45.3.0l160-160z"/></svg></button></form></nav></header><section><div class="paragraph lead"><p>Bind parameters of a callback or sink.</p></div><div class=sect1><h2 id=values>Placeholder <code>lexy::values</code></h2><div class=sectionbody><div class=listingblock><div class=title><code>lexy/callback/bind.hpp</code></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>namespace</span><span class=tok-w> </span><span class=tok-nn>lexy</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>values</span><span class=tok-p>;</span>
<span class=tok-p>}</span></code></pre></div></div><div class="paragraph lead"><p>A placeholder that expands to all values produced by a rule unchanged.</p></div><div class=paragraph><p>In a bound call of the form <code>bound[state](argsâ€¦â€‹)</code>, expands to <code>argsâ€¦â€‹</code>.
The arguments are forwarded unchanged and in the same order.
This happens in addition to any <a href=/reference/callback/bind/#nth_value><code>lexy::nth_value</code>Â </a> expansion.</p></div><div class=exampleblock><div class=title>Example 1. Emulate <code>std::bind_front()</code></div><div class=content><div class="listingblock godbolt-example"><div class=title><a href="https://godbolt.org/clientstate/eyJzZXNzaW9ucyI6W3siY29tcGlsZXJzIjpbXSwiZXhlY3V0b3JzIjpbeyJjb21waWxlciI6eyJpZCI6ImNsYW5nX3RydW5rIiwibGlicyI6W3siaWQiOiJsZXh5IiwidmVyc2lvbiI6InRydW5rIn1dLCJvcHRpb25zIjoiLXN0ZD1jKysyMCJ9LCJzdGRpbiI6IiIsInN0ZGluVmlzaWJsZSI6ZmFsc2V9XSwiaWQiOjEsImxhbmd1YWdlIjoiYysrIiwic291cmNlIjoiI2luY2x1ZGUgXHUwMDNjY3N0ZGlvXHUwMDNlXG4jaW5jbHVkZSBcdTAwM2NsZXh5L2NhbGxiYWNrLmhwcFx1MDAzZVxuXG5jb25zdGV4cHIgYXV0byBteV9jYWxsYmFja1xuICAgID0gbGV4eTo6Y2FsbGJhY2tcdTAwM2NpbnRcdTAwM2UoW10oaW50IGZhY3RvciwgaW50IGkpIHsgcmV0dXJuIGZhY3RvciAqIGk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFtdKGludCBmYWN0b3IsIGludCBhLCBpbnQgYikgeyByZXR1cm4gZmFjdG9yICogKGEgKyBiKTsgfSk7XG5cbi8vIEJpbmQgdGhlIGZpcnN0IHBhcmFtZXRlciBhbmQgZm9yd2FyZCB0aGUgcmVzdCB1bmNoYW5nZWQuXG5jb25zdGV4cHIgYXV0byBib3VuZCA9IGxleHk6OmJpbmQobXlfY2FsbGJhY2ssIDIsIGxleHk6OnZhbHVlcyk7XG5cbmludCBtYWluKClcbntcbiAgICBzdGQ6OnByaW50ZihcIm9uZSBhcmd1bWVudDogJWRcXG5cIiwgYm91bmQoMTEpKTsgICAgICAvLyAyICogMTFcbiAgICBzdGQ6OnByaW50ZihcInR3byBhcmd1bWVudHM6ICVkXFxuXCIsIGJvdW5kKDExLCA0MikpOyAvLyAyICogKDExICsgNDIpXG59In1dfQ==" , title="Try it online"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-w-14" role="img" viewBox="0 0 448 512"><path fill="currentcolor" d="M424.4 214.7 72.4 6.6C43.8-10.3.0 6.1.0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1.0-82.6z"/></svg></a></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>my_callback</span>
<span class=tok-w>    </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>callback</span><span class=tok-o>&lt;</span><span class=tok-kt>int</span><span class=tok-o>&gt;</span><span class=tok-p>([](</span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>factor</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>i</span><span class=tok-p>)</span><span class=tok-w> </span><span class=tok-p>{</span><span class=tok-w> </span><span class=tok-k>return</span><span class=tok-w> </span><span class=tok-n>factor</span><span class=tok-w> </span><span class=tok-o>*</span><span class=tok-w> </span><span class=tok-n>i</span><span class=tok-p>;</span><span class=tok-w> </span><span class=tok-p>},</span>
<span class=tok-w>                          </span><span class=tok-p>[](</span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>factor</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>a</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>b</span><span class=tok-p>)</span><span class=tok-w> </span><span class=tok-p>{</span><span class=tok-w> </span><span class=tok-k>return</span><span class=tok-w> </span><span class=tok-n>factor</span><span class=tok-w> </span><span class=tok-o>*</span><span class=tok-w> </span><span class=tok-p>(</span><span class=tok-n>a</span><span class=tok-w> </span><span class=tok-o>+</span><span class=tok-w> </span><span class=tok-n>b</span><span class=tok-p>);</span><span class=tok-w> </span><span class=tok-p>});</span>

<span class=tok-c1>// Bind the first parameter and forward the rest unchanged.</span>
<span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>bound</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>bind</span><span class=tok-p>(</span><span class=tok-n>my_callback</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-mi>2</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>values</span><span class=tok-p>);</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=nth_value>Placeholder <code>lexy::nth_value</code></h2><div class=sectionbody><div class=listingblock><div class=title><code>lexy/callback/bind.hpp</code></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>namespace</span><span class=tok-w> </span><span class=tok-nn>lexy</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-k>struct</span><span class=tok-w> </span><span class=tok-nc><em>nth_value</em></span><em><span class=tok-o>-</span><span class=tok-n>impl</span></em>
<span class=tok-w>    </span><span class=tok-p>{</span>
<span class=tok-w>        </span><span class=tok-k>template</span><span class=tok-w> </span><span class=tok-o>&lt;</span><span class=tok-k>typename</span><span class=tok-w> </span><span class=tok-nc>Fn</span><span class=tok-o>&gt;</span>
<span class=tok-w>        </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-n><em>nth_value</em></span><em><span class=tok-o>-</span><span class=tok-n>impl</span></em><span class=tok-w> </span><span class=tok-n>map</span><span class=tok-p>(</span><span class=tok-n>Fn</span><span class=tok-o>&amp;&amp;</span><span class=tok-w> </span><span class=tok-n>fn</span><span class=tok-p>)</span><span class=tok-w> </span><span class=tok-k>const</span><span class=tok-p>;</span>

<span class=tok-w>        </span><span class=tok-k>template</span><span class=tok-w> </span><span class=tok-o>&lt;</span><span class=tok-k>typename</span><span class=tok-w> </span><span class=tok-nc>Arg</span><span class=tok-o>&gt;</span>
<span class=tok-w>        </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-n><em>nth_value</em></span><em><span class=tok-o>-</span><span class=tok-n>impl</span></em><span class=tok-w> </span><span class=tok-n>or_</span><span class=tok-p>(</span><span class=tok-n>Arg</span><span class=tok-o>&amp;&amp;</span><span class=tok-w> </span><span class=tok-n>fallback</span><span class=tok-p>)</span><span class=tok-w> </span><span class=tok-k>const</span><span class=tok-p>;</span>
<span class=tok-w>        </span><span class=tok-k>template</span><span class=tok-w> </span><span class=tok-o>&lt;</span><span class=tok-k>typename</span><span class=tok-w> </span><span class=tok-nc>Arg</span><span class=tok-o>&gt;</span>
<span class=tok-w>        </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-n><em>nth_value</em></span><em><span class=tok-o>-</span><span class=tok-n>impl</span></em><span class=tok-w> </span><span class=tok-k>operator</span><span class=tok-o>||</span><span class=tok-p>(</span><span class=tok-n>Arg</span><span class=tok-o>&amp;&amp;</span><span class=tok-w> </span><span class=tok-n>fallback</span><span class=tok-p>)</span><span class=tok-w> </span><span class=tok-k>const</span><span class=tok-p>;</span>

<span class=tok-w>        </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-n><em>nth_value</em></span><em><span class=tok-o>-</span><span class=tok-n>impl</span></em><span class=tok-w> </span><span class=tok-n>or_default</span><span class=tok-p>()</span><span class=tok-w> </span><span class=tok-k>const</span><span class=tok-p>;</span>
<span class=tok-w>    </span><span class=tok-p>};</span>

<span class=tok-w>    </span><span class=tok-k>template</span><span class=tok-w> </span><span class=tok-o>&lt;</span><span class=tok-n>std</span><span class=tok-o>::</span><span class=tok-kt>size_t</span><span class=tok-w> </span><span class=tok-n>N</span><span class=tok-o>&gt;</span>
<span class=tok-w>    </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-n><em>nth_value</em></span><em><span class=tok-o>-</span><span class=tok-n>impl</span></em><span class=tok-w> </span><span class=tok-n>nth_value</span><span class=tok-p>;</span>

<span class=tok-w>    </span><span class=tok-kr>inline</span><span class=tok-w> </span><span class=tok-k>namespace</span><span class=tok-w> </span><span class=tok-nn>placeholders</span>
<span class=tok-w>    </span><span class=tok-p>{</span>
<span class=tok-w>        </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>_1</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>nth_value</span><span class=tok-o>&lt;</span><span class=tok-mi>1</span><span class=tok-o>&gt;</span><span class=tok-p>;</span>
<span class=tok-w>        </span><span class=tok-err>â€¦</span>
<span class=tok-w>        </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>_8</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>nth_value</span><span class=tok-o>&lt;</span><span class=tok-mi>8</span><span class=tok-o>&gt;</span><span class=tok-p>;</span>
<span class=tok-w>    </span><span class=tok-p>}</span>
<span class=tok-p>}</span></code></pre></div></div><div class="paragraph lead"><p>A placeholder that expands to the Nth value produced by a rule.</p></div><div class=paragraph><p>In a bound call of the form <code>bound[state](argsâ€¦â€‹)</code>, expands to the Nth argument (1-indexed).
It is ill-formed if there are fewer than N arguments.
For convenience, placeholders 1 through 8 are pre-defined.</p></div><div class=paragraph><p>The member function <code>map()</code> takes an invocable <code>fn</code> and returns a placeholder that expands to the transformed value.
In a bound call of the form <code>bound[state](argsâ€¦â€‹)</code>, expands to the <code>std::invoke(fn, arg)</code>, where <code>arg</code> is the Nth argument.</p></div><div class=paragraph><p>The member function <code>or_()</code> or the <code>operator||</code> overload (which can be invoked as <code>lexy::_1 || fallback</code> and <code>lexy::_1 or fallback</code>) take a <code>fallback</code> value and return a placeholder that expands to the Nth value or <code>fallback</code>.
In a bound call of the form <code>bound[state](argsâ€¦â€‹)</code> with fewer than N arguments,
expands to <code>fallback</code>.
In a bound call of the form <code>bound[state](argsâ€¦â€‹)</code> where the Nth argument is of type <a href=/reference/dsl/option/#nullopt><code>lexy::nullopt</code>Â </a>, expands to <code>fallback</code>.
Otherwise, expands to the Nth argument.</p></div><div class=paragraph><p>The member function <code>or_default()</code> returns a placeholder that expands to the Nth value or a default-constructed object.
It is equivalent to <code>or_()</code> with a fallback value that is implicitly convertible to any other type by default constructing it.</p></div><div class=paragraph><p><code>map()</code> and one of <code>or_()</code>, <code>operator||</code>, and <code>or_default()</code> can be combined.
If that is the case, the fallback value is not transformed by <code>fn</code> but produced as specified.</p></div><div class=exampleblock><div class=title>Example 2. Reorder and map arguments</div><div class=content><div class="listingblock godbolt-example"><div class=title><a href=https://godbolt.org/clientstate/eyJzZXNzaW9ucyI6W3siY29tcGlsZXJzIjpbXSwiZXhlY3V0b3JzIjpbeyJjb21waWxlciI6eyJpZCI6ImNsYW5nX3RydW5rIiwibGlicyI6W3siaWQiOiJsZXh5IiwidmVyc2lvbiI6InRydW5rIn1dLCJvcHRpb25zIjoiLXN0ZD1jKysyMCJ9LCJzdGRpbiI6IiIsInN0ZGluVmlzaWJsZSI6ZmFsc2V9XSwiaWQiOjEsImxhbmd1YWdlIjoiYysrIiwic291cmNlIjoiI2luY2x1ZGUgXHUwMDNjY3N0ZGlvXHUwMDNlXG4jaW5jbHVkZSBcdTAwM2NsZXh5L2NhbGxiYWNrLmhwcFx1MDAzZVxuXG5jb25zdGV4cHIgYXV0byBteV9jYWxsYmFjayA9IGxleHk6OmNhbGxiYWNrXHUwMDNjaW50XHUwMDNlKFtdKGludCBhLCBpbnQgYikgeyByZXR1cm4gYSAtIGI7IH0pO1xuXG4vLyBTd2FwIHRoZSBhcmd1bWVudHMuLi5cbmNvbnN0ZXhwciBhdXRvIGJvdW5kID0gbGV4eTo6YmluZChteV9jYWxsYmFjaywgbGV4eTo6XzIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLi4uIGFuZCBkb3VibGUgdGhlIChvbGQpIGZpcnN0IG9uZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXh5OjpfMS5tYXAoW10oaW50IGkpIHsgcmV0dXJuIDIgKiBpOyB9KSk7XG5cbmludCBtYWluKClcbntcbiAgICBzdGQ6OnByaW50ZihcInJlc3VsdDogJWRcXG5cIiwgYm91bmQoMTEsIDQyKSk7IC8vIDQyIC0gMjJcbn0ifV19 , title="Try it online"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-w-14" role="img" viewBox="0 0 448 512"><path fill="currentcolor" d="M424.4 214.7 72.4 6.6C43.8-10.3.0 6.1.0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1.0-82.6z"/></svg></a></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>my_callback</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>callback</span><span class=tok-o>&lt;</span><span class=tok-kt>int</span><span class=tok-o>&gt;</span><span class=tok-p>([](</span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>a</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>b</span><span class=tok-p>)</span><span class=tok-w> </span><span class=tok-p>{</span><span class=tok-w> </span><span class=tok-k>return</span><span class=tok-w> </span><span class=tok-n>a</span><span class=tok-w> </span><span class=tok-o>-</span><span class=tok-w> </span><span class=tok-n>b</span><span class=tok-p>;</span><span class=tok-w> </span><span class=tok-p>});</span>

<span class=tok-c1>// Swap the arguments...</span>
<span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>bound</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>bind</span><span class=tok-p>(</span><span class=tok-n>my_callback</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>_2</span><span class=tok-p>,</span>
<span class=tok-w>                                  </span><span class=tok-c1>// ... and double the (old) first one.</span>
<span class=tok-w>                                  </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>_1</span><span class=tok-p>.</span><span class=tok-n>map</span><span class=tok-p>([](</span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>i</span><span class=tok-p>)</span><span class=tok-w> </span><span class=tok-p>{</span><span class=tok-w> </span><span class=tok-k>return</span><span class=tok-w> </span><span class=tok-mi>2</span><span class=tok-w> </span><span class=tok-o>*</span><span class=tok-w> </span><span class=tok-n>i</span><span class=tok-p>;</span><span class=tok-w> </span><span class=tok-p>}));</span></code></pre></div></div></div></div><div class=exampleblock><div class=title>Example 3. Produce a different value from <code>lexy::opt</code></div><div class=content><div class="listingblock godbolt-example"><div class=title><a href=https://godbolt.org/clientstate/eyJzZXNzaW9ucyI6W3siY29tcGlsZXJzIjpbXSwiZXhlY3V0b3JzIjpbeyJjb21waWxlciI6eyJpZCI6ImNsYW5nX3RydW5rIiwibGlicyI6W3siaWQiOiJsZXh5IiwidmVyc2lvbiI6InRydW5rIn1dLCJvcHRpb25zIjoiLXN0ZD1jKysyMCJ9LCJzdGRpbiI6IjQyIiwic3RkaW5WaXNpYmxlIjp0cnVlfV0sImlkIjoxLCJsYW5ndWFnZSI6ImMrKyIsInNvdXJjZSI6IiNpbmNsdWRlIFx1MDAzY3N0cmluZ1x1MDAzZVxuXG4jaW5jbHVkZSBcdTAwM2NsZXh5L2FjdGlvbi9wYXJzZS5ocHBcdTAwM2VcbiNpbmNsdWRlIFx1MDAzY2xleHkvY2FsbGJhY2suaHBwXHUwMDNlXG4jaW5jbHVkZSBcdTAwM2NsZXh5L2RzbC5ocHBcdTAwM2VcbiNpbmNsdWRlIFx1MDAzY2xleHlfZXh0L2NvbXBpbGVyX2V4cGxvcmVyLmhwcFx1MDAzZVxuI2luY2x1ZGUgXHUwMDNjbGV4eV9leHQvcmVwb3J0X2Vycm9yLmhwcFx1MDAzZVxuXG5uYW1lc3BhY2UgZHNsID0gbGV4eTo6ZHNsO1xuXG5zdHJ1Y3QgZGVjaW1hbFxue1xuICAgIGludCAgICAgICAgIGludGVnZXI7XG4gICAgc3RkOjpzdHJpbmcgZnJhY3Rpb247XG59O1xuXG5zdHJ1Y3QgcHJvZHVjdGlvblxue1xuICAgIHN0cnVjdCBmcmFjdGlvblxuICAgIHtcbiAgICAgICAgc3RhdGljIGNvbnN0ZXhwciBhdXRvIHJ1bGUgID0gZHNsOjpjYXB0dXJlKGRzbDo6ZGlnaXRzXHUwMDNjXHUwMDNlKTtcbiAgICAgICAgc3RhdGljIGNvbnN0ZXhwciBhdXRvIHZhbHVlID0gbGV4eTo6YXNfc3RyaW5nXHUwMDNjc3RkOjpzdHJpbmdcdTAwM2U7XG4gICAgfTtcblxuICAgIHN0YXRpYyBjb25zdGV4cHIgYXV0byBydWxlID0gW10ge1xuICAgICAgICBhdXRvIGludGVnZXIgPSBkc2w6OmludGVnZXJcdTAwM2NpbnRcdTAwM2U7XG5cbiAgICAgICAgcmV0dXJuIGludGVnZXIgKyBkc2w6Om9wdChkc2w6OnBlcmlvZCBcdTAwM2VcdTAwM2UgZHNsOjpwXHUwMDNjZnJhY3Rpb25cdTAwM2UpO1xuICAgIH0oKTtcblxuICAgIHN0YXRpYyBjb25zdGV4cHIgYXV0byB2YWx1ZSA9IGxleHk6OmJpbmQobGV4eTo6Y29uc3RydWN0XHUwMDNjZGVjaW1hbFx1MDAzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBzZWNvbmQgYXJndW1lbnQgaXMgbGV4eTo6bnVsbG9wdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb2R1Y2UgYSB6ZXJvIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXh5OjpfMSwgbGV4eTo6XzIgb3IgXCIwXCIpO1xufTtcblxuaW50IG1haW4oKVxue1xuICAgIGF1dG8gaW5wdXQgID0gbGV4eV9leHQ6OmNvbXBpbGVyX2V4cGxvcmVyX2lucHV0KCk7XG4gICAgYXV0byByZXN1bHQgPSBsZXh5OjpwYXJzZVx1MDAzY3Byb2R1Y3Rpb25cdTAwM2UoaW5wdXQsIGxleHlfZXh0OjpyZXBvcnRfZXJyb3IpO1xuICAgIGlmICghcmVzdWx0KVxuICAgICAgICByZXR1cm4gMTtcblxuICAgIHN0ZDo6cHJpbnRmKFwiVGhlIHZhbHVlIGlzOiAlZC4lc1xcblwiLCByZXN1bHQudmFsdWUoKS5pbnRlZ2VyLCByZXN1bHQudmFsdWUoKS5mcmFjdGlvbi5jX3N0cigpKTtcbn0ifV19 , title="Try it online"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-w-14" role="img" viewBox="0 0 448 512"><path fill="currentcolor" d="M424.4 214.7 72.4 6.6C43.8-10.3.0 6.1.0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1.0-82.6z"/></svg></a></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>struct</span><span class=tok-w> </span><span class=tok-nc>decimal</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-kt>int</span><span class=tok-w>         </span><span class=tok-n>integer</span><span class=tok-p>;</span>
<span class=tok-w>    </span><span class=tok-n>std</span><span class=tok-o>::</span><span class=tok-n>string</span><span class=tok-w> </span><span class=tok-n>fraction</span><span class=tok-p>;</span>
<span class=tok-p>};</span>

<span class=tok-k>struct</span><span class=tok-w> </span><span class=tok-nc>production</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-k>struct</span><span class=tok-w> </span><span class=tok-nc>fraction</span>
<span class=tok-w>    </span><span class=tok-p>{</span>
<span class=tok-w>        </span><span class=tok-k>static</span><span class=tok-w> </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>rule</span><span class=tok-w>  </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>capture</span><span class=tok-p>(</span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>digits</span><span class=tok-o>&lt;&gt;</span><span class=tok-p>);</span>
<span class=tok-w>        </span><span class=tok-k>static</span><span class=tok-w> </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>value</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>as_string</span><span class=tok-o>&lt;</span><span class=tok-n>std</span><span class=tok-o>::</span><span class=tok-n>string</span><span class=tok-o>&gt;</span><span class=tok-p>;</span>
<span class=tok-w>    </span><span class=tok-p>};</span>

<span class=tok-w>    </span><span class=tok-k>static</span><span class=tok-w> </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>rule</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-p>[]</span><span class=tok-w> </span><span class=tok-p>{</span>
<span class=tok-w>        </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>integer</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>integer</span><span class=tok-o>&lt;</span><span class=tok-kt>int</span><span class=tok-o>&gt;</span><span class=tok-p>;</span>

<span class=tok-w>        </span><span class=tok-k>return</span><span class=tok-w> </span><span class=tok-n>integer</span><span class=tok-w> </span><span class=tok-o>+</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>opt</span><span class=tok-p>(</span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>period</span><span class=tok-w> </span><span class=tok-o>&gt;&gt;</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>p</span><span class=tok-o>&lt;</span><span class=tok-n>fraction</span><span class=tok-o>&gt;</span><span class=tok-p>);</span>
<span class=tok-w>    </span><span class=tok-p>}();</span>

<span class=tok-w>    </span><span class=tok-k>static</span><span class=tok-w> </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>value</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>bind</span><span class=tok-p>(</span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>construct</span><span class=tok-o>&lt;</span><span class=tok-n>decimal</span><span class=tok-o>&gt;</span><span class=tok-p>,</span>
<span class=tok-w>                                             </span><span class=tok-c1>// If the second argument is lexy::nullopt,</span>
<span class=tok-w>                                             </span><span class=tok-c1>// produce a zero instead.</span>
<span class=tok-w>                                             </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>_1</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>_2</span><span class=tok-w> </span><span class=tok-k>or</span><span class=tok-w> </span><span class=tok-s>&#34;0&#34;</span><span class=tok-p>);</span>
<span class=tok-p>};</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=parse_state>Placeholder <code>lexy::parse_state</code></h2><div class=sectionbody><div class=listingblock><div class=title><code>lexy/callback/bind.hpp</code></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>namespace</span><span class=tok-w> </span><span class=tok-nn>lexy</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-k>struct</span><span class=tok-w> </span><span class=tok-nc><em>parse_state</em></span><em><span class=tok-o>-</span><span class=tok-n>impl</span></em>
<span class=tok-w>    </span><span class=tok-p>{</span>
<span class=tok-w>        </span><span class=tok-k>template</span><span class=tok-w> </span><span class=tok-o>&lt;</span><span class=tok-k>typename</span><span class=tok-w> </span><span class=tok-nc>Fn</span><span class=tok-o>&gt;</span>
<span class=tok-w>        </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>map</span><span class=tok-p>(</span><span class=tok-n>Fn</span><span class=tok-o>&amp;&amp;</span><span class=tok-w> </span><span class=tok-n>fn</span><span class=tok-p>)</span><span class=tok-w> </span><span class=tok-k>const</span><span class=tok-p>;</span>
<span class=tok-w>    </span><span class=tok-p>};</span>

<span class=tok-w>    </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-n><em>parse_state</em></span><em><span class=tok-o>-</span><span class=tok-n>impl</span></em><span class=tok-w> </span><span class=tok-n>parse_state</span><span class=tok-p>;</span>
<span class=tok-p>}</span></code></pre></div></div><div class="paragraph lead"><p>A placeholder that expands to the parse state.</p></div><div class=paragraph><p>In a bound call of the form <code>bound[state](argsâ€¦â€‹)</code>, expands to <code>state</code>.
It is ill-formed if no <code>state</code> was provided to the callback.</p></div><div class=paragraph><p>The member function <code>map()</code> takes an invocable <code>fn</code> and returns a placeholder that expands to the transformed parse state.
In a bound call of the form <code>bound[state](argsâ€¦â€‹)</code>, expands to the <code>std::invoke(fn, state)</code>.</p></div><div class=exampleblock><div class=title>Example 4. Access additional state in a callback</div><div class=content><div class="listingblock godbolt-example"><div class=title><a href=https://godbolt.org/clientstate/eyJzZXNzaW9ucyI6W3siY29tcGlsZXJzIjpbXSwiZXhlY3V0b3JzIjpbeyJjb21waWxlciI6eyJpZCI6ImNsYW5nX3RydW5rIiwibGlicyI6W3siaWQiOiJsZXh5IiwidmVyc2lvbiI6InRydW5rIn1dLCJvcHRpb25zIjoiLXN0ZD1jKysyMCJ9LCJzdGRpbiI6IjExLCA0MiIsInN0ZGluVmlzaWJsZSI6dHJ1ZX1dLCJpZCI6MSwibGFuZ3VhZ2UiOiJjKysiLCJzb3VyY2UiOiIjaW5jbHVkZSBcdTAwM2NzdHJpbmdcdTAwM2VcbiNpbmNsdWRlIFx1MDAzY3ZlY3Rvclx1MDAzZVxuXG4jaW5jbHVkZSBcdTAwM2NsZXh5L2FjdGlvbi9wYXJzZS5ocHBcdTAwM2VcbiNpbmNsdWRlIFx1MDAzY2xleHkvY2FsbGJhY2suaHBwXHUwMDNlXG4jaW5jbHVkZSBcdTAwM2NsZXh5L2RzbC5ocHBcdTAwM2VcbiNpbmNsdWRlIFx1MDAzY2xleHlfZXh0L2NvbXBpbGVyX2V4cGxvcmVyLmhwcFx1MDAzZVxuI2luY2x1ZGUgXHUwMDNjbGV4eV9leHQvcmVwb3J0X2Vycm9yLmhwcFx1MDAzZVxuXG5uYW1lc3BhY2UgZHNsID0gbGV4eTo6ZHNsO1xuXG5zdHJ1Y3QgZW50cnlcbntcbiAgICBzdGQ6OnN0cmluZyBuYW1lO1xuICAgIGludCAgICAgICAgIGEsIGI7XG59O1xuXG5zdHJ1Y3QgcHJvZHVjdGlvblxue1xuICAgIHN0YXRpYyBjb25zdGV4cHIgYXV0byB3aGl0ZXNwYWNlID0gZHNsOjphc2NpaTo6c3BhY2U7XG5cbiAgICBzdGF0aWMgY29uc3RleHByIGF1dG8gcnVsZSA9IFtdIHtcbiAgICAgICAgYXV0byBpbnRlZ2VyID0gZHNsOjppbnRlZ2VyXHUwMDNjaW50XHUwMDNlO1xuICAgICAgICByZXR1cm4gZHNsOjp0d2ljZShpbnRlZ2VyLCBkc2w6OnNlcChkc2w6OmNvbW1hKSk7XG4gICAgfSgpO1xuXG4gICAgLy8gQ29uc3RydWN0IHRoZSBlbnRyeSB3aGVyZSB0aGUgbmFtZSBpcyB0YWtlbiBmcm9tIHRoZSBwYXJzZSBzdGF0ZS5cbiAgICBzdGF0aWMgY29uc3RleHByIGF1dG8gdmFsdWVcbiAgICAgICAgPSBsZXh5OjpiaW5kKGxleHk6OmNvbnN0cnVjdFx1MDAzY2VudHJ5XHUwMDNlLCBsZXh5OjpwYXJzZV9zdGF0ZSwgbGV4eTo6dmFsdWVzKTtcbn07XG5cbmludCBtYWluKClcbntcbiAgICBhdXRvIGlucHV0ICA9IGxleHlfZXh0Ojpjb21waWxlcl9leHBsb3Jlcl9pbnB1dCgpO1xuICAgIGF1dG8gcmVzdWx0ID0gbGV4eTo6cGFyc2VcdTAwM2Nwcm9kdWN0aW9uXHUwMDNlKGlucHV0LCBcImZvb1wiLCBsZXh5X2V4dDo6cmVwb3J0X2Vycm9yKTtcbiAgICBpZiAoIXJlc3VsdClcbiAgICAgICAgcmV0dXJuIDE7XG5cbiAgICBzdGQ6OnByaW50ZihcIiVzOiAlZCwgJWRcXG5cIiwgcmVzdWx0LnZhbHVlKCkubmFtZS5jX3N0cigpLCByZXN1bHQudmFsdWUoKS5hLCByZXN1bHQudmFsdWUoKS5iKTtcbn0ifV19 , title="Try it online"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-w-14" role="img" viewBox="0 0 448 512"><path fill="currentcolor" d="M424.4 214.7 72.4 6.6C43.8-10.3.0 6.1.0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1.0-82.6z"/></svg></a></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>struct</span><span class=tok-w> </span><span class=tok-nc>entry</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-n>std</span><span class=tok-o>::</span><span class=tok-n>string</span><span class=tok-w> </span><span class=tok-n>name</span><span class=tok-p>;</span>
<span class=tok-w>    </span><span class=tok-kt>int</span><span class=tok-w>         </span><span class=tok-n>a</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-n>b</span><span class=tok-p>;</span>
<span class=tok-p>};</span>

<span class=tok-k>struct</span><span class=tok-w> </span><span class=tok-nc>production</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-k>static</span><span class=tok-w> </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>whitespace</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>ascii</span><span class=tok-o>::</span><span class=tok-n>space</span><span class=tok-p>;</span>

<span class=tok-w>    </span><span class=tok-k>static</span><span class=tok-w> </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>rule</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-p>[]</span><span class=tok-w> </span><span class=tok-p>{</span>
<span class=tok-w>        </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>integer</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>integer</span><span class=tok-o>&lt;</span><span class=tok-kt>int</span><span class=tok-o>&gt;</span><span class=tok-p>;</span>
<span class=tok-w>        </span><span class=tok-k>return</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>twice</span><span class=tok-p>(</span><span class=tok-n>integer</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>sep</span><span class=tok-p>(</span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>comma</span><span class=tok-p>));</span>
<span class=tok-w>    </span><span class=tok-p>}();</span>

<span class=tok-w>    </span><span class=tok-c1>// Construct the entry where the name is taken from the parse state.</span>
<span class=tok-w>    </span><span class=tok-k>static</span><span class=tok-w> </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>value</span>
<span class=tok-w>        </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>bind</span><span class=tok-p>(</span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>construct</span><span class=tok-o>&lt;</span><span class=tok-n>entry</span><span class=tok-o>&gt;</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>parse_state</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>values</span><span class=tok-p>);</span>
<span class=tok-p>};</span></code></pre></div></div></div></div></div></div><div class=sect1><h2 id=bind>Callback <code>lexy::bind</code></h2><div class=sectionbody><div class=listingblock><div class=title><code>lexy/callback/bind.hpp</code></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>namespace</span><span class=tok-w> </span><span class=tok-nn>lexy</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-k>template</span><span class=tok-w> </span><span class=tok-o>&lt;</span><span class=tok-k>typename</span><span class=tok-w> </span><span class=tok-p>...</span><span class=tok-w> </span><span class=tok-n>BoundArgs</span><span class=tok-o>&gt;</span>
<span class=tok-w>    </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-n><em>callback</em></span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>bind</span><span class=tok-p>(</span><span class=tok-n><em>callback</em></span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>callback</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-n>BoundArgs</span><span class=tok-o>&amp;&amp;</span><span class=tok-p>...</span><span class=tok-w> </span><span class=tok-n>args</span><span class=tok-p>);</span>
<span class=tok-p>}</span></code></pre></div></div><div class="paragraph lead"><p>Bind parameters or transform and reorder arguments of a callback.</p></div><div class=paragraph><p>When invoked as <code>bound[state](argsâ€¦â€‹)</code> it invokes <code>callback</code> with the bound arguments.
If the bound argument is a placeholder, it is expanded as described there.
Otherwise, the bound argument is forwarded as-is.</p></div><div class=exampleblock><div class=title>Example 5. Bind all parameters</div><div class=content><div class="listingblock godbolt-example"><div class=title><a href=https://godbolt.org/clientstate/eyJzZXNzaW9ucyI6W3siY29tcGlsZXJzIjpbXSwiZXhlY3V0b3JzIjpbeyJjb21waWxlciI6eyJpZCI6ImNsYW5nX3RydW5rIiwibGlicyI6W3siaWQiOiJsZXh5IiwidmVyc2lvbiI6InRydW5rIn1dLCJvcHRpb25zIjoiLXN0ZD1jKysyMCJ9LCJzdGRpbiI6IiIsInN0ZGluVmlzaWJsZSI6ZmFsc2V9XSwiaWQiOjEsImxhbmd1YWdlIjoiYysrIiwic291cmNlIjoiI2luY2x1ZGUgXHUwMDNjY3N0ZGlvXHUwMDNlXG4jaW5jbHVkZSBcdTAwM2NsZXh5L2NhbGxiYWNrLmhwcFx1MDAzZVxuXG5jb25zdGV4cHIgYXV0byBteV9jYWxsYmFja1xuICAgID0gbGV4eTo6Y2FsbGJhY2tcdTAwM2NpbnRcdTAwM2UoW10oaW50IGZhY3RvciwgaW50IGkpIHsgcmV0dXJuIGZhY3RvciAqIGk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFtdKGludCBmYWN0b3IsIGludCBhLCBpbnQgYikgeyByZXR1cm4gZmFjdG9yICogKGEgKyBiKTsgfSk7XG5cbi8vIEJpbmQgYWxsIGFyZ3VtZW50cy5cbmNvbnN0ZXhwciBhdXRvIGJvdW5kID0gbGV4eTo6YmluZChteV9jYWxsYmFjaywgMiwgMTEpO1xuXG5pbnQgbWFpbigpXG57XG4gICAgc3RkOjpwcmludGYoXCJ6ZXJvIGFyZ3VtZW50czogJWRcXG5cIiwgYm91bmQoKSk7IC8vIDIgKiAxMVxuICAgIHN0ZDo6cHJpbnRmKFwib25lIGFyZ3VtZW50OiAlZFxcblwiLCBib3VuZCg0MikpOyAvLyAyICogMTFcbn0ifV19 , title="Try it online"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-w-14" role="img" viewBox="0 0 448 512"><path fill="currentcolor" d="M424.4 214.7 72.4 6.6C43.8-10.3.0 6.1.0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1.0-82.6z"/></svg></a></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>my_callback</span>
<span class=tok-w>    </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>callback</span><span class=tok-o>&lt;</span><span class=tok-kt>int</span><span class=tok-o>&gt;</span><span class=tok-p>([](</span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>factor</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>i</span><span class=tok-p>)</span><span class=tok-w> </span><span class=tok-p>{</span><span class=tok-w> </span><span class=tok-k>return</span><span class=tok-w> </span><span class=tok-n>factor</span><span class=tok-w> </span><span class=tok-o>*</span><span class=tok-w> </span><span class=tok-n>i</span><span class=tok-p>;</span><span class=tok-w> </span><span class=tok-p>},</span>
<span class=tok-w>                          </span><span class=tok-p>[](</span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>factor</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>a</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-kt>int</span><span class=tok-w> </span><span class=tok-n>b</span><span class=tok-p>)</span><span class=tok-w> </span><span class=tok-p>{</span><span class=tok-w> </span><span class=tok-k>return</span><span class=tok-w> </span><span class=tok-n>factor</span><span class=tok-w> </span><span class=tok-o>*</span><span class=tok-w> </span><span class=tok-p>(</span><span class=tok-n>a</span><span class=tok-w> </span><span class=tok-o>+</span><span class=tok-w> </span><span class=tok-n>b</span><span class=tok-p>);</span><span class=tok-w> </span><span class=tok-p>});</span>

<span class=tok-c1>// Bind all arguments.</span>
<span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>bound</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>bind</span><span class=tok-p>(</span><span class=tok-n>my_callback</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-mi>2</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-mi>11</span><span class=tok-p>);</span></code></pre></div></div></div></div><div class="admonitionblock caution"><table><tbody><tr><td class=icon><div class=title>Caution</div></td><td class=content>Arguments to the bound callback are silently discarded if theyâ€™re not needed by a placeholder.</td></tr></tbody></table></div></div></div><div class=sect1><h2 id=bind_sink>Sink <code>lexy::bind_sink</code></h2><div class=sectionbody><div class=listingblock><div class=title><code>lexy/callback/bind.hpp</code></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>namespace</span><span class=tok-w> </span><span class=tok-nn>lexy</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-k>template</span><span class=tok-w> </span><span class=tok-o>&lt;</span><span class=tok-k>typename</span><span class=tok-w> </span><span class=tok-p>...</span><span class=tok-w> </span><span class=tok-n>SinkArgs</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-k>typename</span><span class=tok-w> </span><span class=tok-p>...</span><span class=tok-w> </span><span class=tok-n>BoundArgs</span><span class=tok-o>&gt;</span>
<span class=tok-w>    </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-n><em>sink</em></span><span class=tok-o>&lt;&gt;</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>bind_sink</span><span class=tok-p>(</span><span class=tok-n><em>sink</em></span><span class=tok-o>&lt;</span><span class=tok-n>SinkArgs</span><span class=tok-p>...</span><span class=tok-o>&gt;</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>sink</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-n>BoundArgs</span><span class=tok-o>&amp;&amp;</span><span class=tok-p>...</span><span class=tok-w> </span><span class=tok-n>args</span><span class=tok-p>);</span>
<span class=tok-p>}</span></code></pre></div></div><div class="paragraph lead"><p>Bind parameters of the <code>.sink()</code> member function.</p></div><div class=paragraph><p>It returns a sink whose <code>sink()</code> member function forwards to <code>sink</code> and returns the same sink callback.
However, <code>sink.sink()</code> is invoked by the bound arguments.</p></div><div class=paragraph><p>A call to <code>bound.sink()</code> results in a call to <code>sink.sink(argsâ€¦â€‹)</code>, where no argument must be a placeholder.
A call to <code>bound.sink(state)</code> results in a call to <code>sink.sink()</code> with the expanded arguments:
If the argument is a placeholder, it is expanded as described there but note that there are no values, only a state parameter.
Otherwise, the bound argument is forwarded as-is.</p></div><div class=paragraph><p>A call to <code>bound(â€¦â€‹)</code> will be forwarded as-is onto <code>sink(â€¦â€‹)</code>, allowing a bound sink to be used with rules like <code>opt_list</code> from <a href=/reference/dsl/terminator/#terminator><code>lexy::dsl::terminator</code>Â </a>.</p></div><div class=exampleblock><div class=title>Example 6. Construct the list of integers with a custom allocator</div><div class=content><div class="listingblock godbolt-example"><div class=title><a href="https://godbolt.org/clientstate/eyJzZXNzaW9ucyI6W3siY29tcGlsZXJzIjpbXSwiZXhlY3V0b3JzIjpbeyJjb21waWxlciI6eyJpZCI6ImNsYW5nX3RydW5rIiwibGlicyI6W3siaWQiOiJsZXh5IiwidmVyc2lvbiI6InRydW5rIn1dLCJvcHRpb25zIjoiLXN0ZD1jKysyMCJ9LCJzdGRpbiI6IiIsInN0ZGluVmlzaWJsZSI6ZmFsc2V9XSwiaWQiOjEsImxhbmd1YWdlIjoiYysrIiwic291cmNlIjoiI2luY2x1ZGUgXHUwMDNjdmVjdG9yXHUwMDNlXG5cbiNpbmNsdWRlIFx1MDAzY2xleHkvYWN0aW9uL3BhcnNlLmhwcFx1MDAzZVxuI2luY2x1ZGUgXHUwMDNjbGV4eS9jYWxsYmFjay5ocHBcdTAwM2VcbiNpbmNsdWRlIFx1MDAzY2xleHkvZHNsLmhwcFx1MDAzZVxuI2luY2x1ZGUgXHUwMDNjbGV4eV9leHQvY29tcGlsZXJfZXhwbG9yZXIuaHBwXHUwMDNlXG4jaW5jbHVkZSBcdTAwM2NsZXh5X2V4dC9yZXBvcnRfZXJyb3IuaHBwXHUwMDNlXG5cbm5hbWVzcGFjZSBkc2wgPSBsZXh5Ojpkc2w7XG5cbnN0cnVjdCBzdGF0ZVxue1xuICAgIHN0ZDo6YWxsb2NhdG9yXHUwMDNjaW50XHUwMDNlIGFsbG9jYXRvcjsgLy8gVGhlIGFsbG9jYXRvciB0aGF0IHNob3VsZCBiZSB1c2VkLlxuICAgIC8vIFBvdGVudGlhbGx5IG90aGVyIG1lbWJlcnMgaGVyZS5cbn07XG5cbnN0cnVjdCBwcm9kdWN0aW9uXG57XG4gICAgc3RhdGljIGNvbnN0ZXhwciBhdXRvIHdoaXRlc3BhY2UgPSBkc2w6OmFzY2lpOjpzcGFjZTtcblxuICAgIHN0YXRpYyBjb25zdGV4cHIgYXV0byBydWxlID0gW10ge1xuICAgICAgICBhdXRvIGludGVnZXIgPSBkc2w6OmludGVnZXJcdTAwM2NpbnRcdTAwM2U7XG4gICAgICAgIHJldHVybiBkc2w6Omxpc3QoaW50ZWdlciwgZHNsOjpzZXAoZHNsOjpjb21tYSkpO1xuICAgIH0oKTtcblxuICAgIHN0YXRpYyBjb25zdGV4cHIgYXV0byB2YWx1ZVxuICAgICAgICAvLyBQYXNzIHRoZSBhbGxvY2F0b3IgdG8gdGhlIHNpbmsuXG4gICAgICAgIC8vIE5vdGU6IHRoaXMgaXMgdGhlIHNhbWUgYXMgdGhlIGAuYWxsb2NhdG9yKFx1MDAyNnN0YXRlOjphbGxvY2F0b3IpYC5cbiAgICAgICAgPSBsZXh5OjpiaW5kX3NpbmsobGV4eTo6YXNfbGlzdFx1MDAzY3N0ZDo6dmVjdG9yXHUwMDNjaW50XHUwMDNlXHUwMDNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBsZXh5OjpwYXJzZV9zdGF0ZS5tYXAoXHUwMDI2c3RhdGU6OmFsbG9jYXRvcikpO1xufTtcblxuaW50IG1haW4oKVxue1xuICAgIGF1dG8gaW5wdXQgID0gbGV4eV9leHQ6OmNvbXBpbGVyX2V4cGxvcmVyX2lucHV0KCk7XG4gICAgYXV0byByZXN1bHQgPSBsZXh5OjpwYXJzZVx1MDAzY3Byb2R1Y3Rpb25cdTAwM2UoaW5wdXQsIHN0YXRlKCksIGxleHlfZXh0OjpyZXBvcnRfZXJyb3IpO1xuICAgIGlmICghcmVzdWx0KVxuICAgICAgICByZXR1cm4gMTtcblxuICAgIHN0ZDo6cHJpbnRmKFwibnVtYmVyczogXCIpO1xuICAgIGZvciAoYXV0byBpIDogcmVzdWx0LnZhbHVlKCkpXG4gICAgICAgIHN0ZDo6cHJpbnRmKFwiJWQgXCIsIGkpO1xuICAgIHN0ZDo6cHV0Y2hhcignXFxuJyk7XG59In1dfQ==" , title="Try it online"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-w-14" role="img" viewBox="0 0 448 512"><path fill="currentcolor" d="M424.4 214.7 72.4 6.6C43.8-10.3.0 6.1.0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1.0-82.6z"/></svg></a></div><div class=content><pre class="pygments highlight"><code data-lang=cpp><span></span><span class=tok-k>struct</span><span class=tok-w> </span><span class=tok-nc>state</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-n>std</span><span class=tok-o>::</span><span class=tok-n>allocator</span><span class=tok-o>&lt;</span><span class=tok-kt>int</span><span class=tok-o>&gt;</span><span class=tok-w> </span><span class=tok-n>allocator</span><span class=tok-p>;</span><span class=tok-w> </span><span class=tok-c1>// The allocator that should be used.</span>
<span class=tok-w>    </span><span class=tok-c1>// Potentially other members here.</span>
<span class=tok-p>};</span>

<span class=tok-k>struct</span><span class=tok-w> </span><span class=tok-nc>production</span>
<span class=tok-p>{</span>
<span class=tok-w>    </span><span class=tok-k>static</span><span class=tok-w> </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>whitespace</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>ascii</span><span class=tok-o>::</span><span class=tok-n>space</span><span class=tok-p>;</span>

<span class=tok-w>    </span><span class=tok-k>static</span><span class=tok-w> </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>rule</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-p>[]</span><span class=tok-w> </span><span class=tok-p>{</span>
<span class=tok-w>        </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>integer</span><span class=tok-w> </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>integer</span><span class=tok-o>&lt;</span><span class=tok-kt>int</span><span class=tok-o>&gt;</span><span class=tok-p>;</span>
<span class=tok-w>        </span><span class=tok-k>return</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>list</span><span class=tok-p>(</span><span class=tok-n>integer</span><span class=tok-p>,</span><span class=tok-w> </span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>sep</span><span class=tok-p>(</span><span class=tok-n>dsl</span><span class=tok-o>::</span><span class=tok-n>comma</span><span class=tok-p>));</span>
<span class=tok-w>    </span><span class=tok-p>}();</span>

<span class=tok-w>    </span><span class=tok-k>static</span><span class=tok-w> </span><span class=tok-k>constexpr</span><span class=tok-w> </span><span class=tok-k>auto</span><span class=tok-w> </span><span class=tok-n>value</span>
<span class=tok-w>        </span><span class=tok-c1>// Pass the allocator to the sink.</span>
<span class=tok-w>        </span><span class=tok-c1>// Note: this is the same as the `.allocator(&amp;state::allocator)`.</span>
<span class=tok-w>        </span><span class=tok-o>=</span><span class=tok-w> </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>bind_sink</span><span class=tok-p>(</span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>as_list</span><span class=tok-o>&lt;</span><span class=tok-n>std</span><span class=tok-o>::</span><span class=tok-n>vector</span><span class=tok-o>&lt;</span><span class=tok-kt>int</span><span class=tok-o>&gt;&gt;</span><span class=tok-p>,</span>
<span class=tok-w>                          </span><span class=tok-n>lexy</span><span class=tok-o>::</span><span class=tok-n>parse_state</span><span class=tok-p>.</span><span class=tok-n>map</span><span class=tok-p>(</span><span class=tok-o>&amp;</span><span class=tok-n>state</span><span class=tok-o>::</span><span class=tok-n>allocator</span><span class=tok-p>));</span>
<span class=tok-p>};</span></code></pre></div></div></div></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><div class=title>Tip</div></td><td class=content>Specifically for passing allocators to <a href=/reference/callback/container/#as_list><code>lexy::as_list</code>Â </a> or <a href=/reference/callback/container/#as_list><code>lexy::as_collection</code>Â </a>, use its <code>.allocator()</code> function instead.
This also uses the allocator if used as a callback.</td></tr></tbody></table></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><div class=title>Note</div></td><td class=content>The bound arguments must either be constants or <a href=/reference/callback/bind/#parse_state><code>lexy::parse_state</code>Â </a>; other placeholder make no sense as the call does not have any values.</td></tr></tbody></table></div></div></div></section><section id=see-also><h2>See also</h2><ul><li><a href=/reference/callback/container/#as_list><code>lexy::as_collection</code></a></li><li><a href=/reference/callback/container/#as_list><code>lexy::as_list</code></a></li><li><a href=/reference/dsl/terminator/#terminator><code>lexy::dsl::terminator</code></a></li><li><a href=/reference/dsl/option/#nullopt><code>lexy::nullopt</code></a></li></ul></section></article><datalist id=dsl-goto-data></datalist>
<script>window.addEventListener("load",async function(){var e=await(await fetch("/reference/index.json")).json(),n=document.getElementById("dsl-goto-data"),s=document.getElementById("dsl-goto-form"),t=document.getElementById("dsl-goto-search");for(let t in e){let s=document.createElement("option");t.startsWith("lexy_")?s.value=t.toUpperCase():s.value=t,n.appendChild(s)}s.addEventListener("submit",function(n){n.preventDefault();let s=e[t.value.toLowerCase()];return s?window.location.href=s:t.value="",!1})})</script></main><footer id=page-footer><section class=copyright>&copy; <a target=_blank href=https://github.com/foonathan/lexy/blob/main/LICENSE title=License>2020-2024 Jonathan MÃ¼ller and lexy contributors</a></section><section class=poweredby>Made with <a target=_blank href=https://gohugo.io>Hugo</a> and <a target=_blank href=https://fontawesome.com/license>Font Awesome</a>.</section></footer></body></html>