<!doctype html><html lang=en-US><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>lexy/encoding.hpp — lexy</title><style>:root{--white:white;--background-color:#fdfdfd;--default-color:#101010;--heading-color:#0A0A0A;--link-color:#2A2A2A;--gray-highlight-color:#aaaaaa;--highlight-color:#2861ce}@media(prefers-color-scheme:dark){:root{--white:#202020;--background-color:#222222;--default-color:#efefef;--heading-color:#f5f5f5;--link-color:#d5d5d5;--gray-highlight-color:#555555}}nav#menu div.menu-container,main{max-width:1250px;margin:0 auto;padding:0 10px}@media(min-width:800px){article{max-width:900px;padding:0 10px}}html{position:relative;min-height:100%;margin:0;padding:0}body{font-family:serif;font-size:18px;color:var(--default-color);background-color:var(--background-color);width:100%;padding:0;margin:0}main{margin-bottom:75px;display:flex;justify-content:center}h1,h2,h3,h4,h5,h6{font-family:sans-serif;font-weight:700;line-height:1.15em;color:var(--heading-color);margin:0 0 .4em;hyphens:auto}h1{font-size:2em}h2{font-size:1.75em}h3{font-size:1.5em}h4{font-size:1.25em}h5{font-size:1.15em}h6{font-size:1.1em}a,a svg,button svg{color:var(--link-color);fill:var(--link-color);stroke:var(--link-color);transition:color ease .3s}a:hover,button:hover{color:var(--highlight-color)}a:hover svg,button:hover svg{color:var(--highlight-color);fill:var(--highlight-color);stroke:var(--highlight-color)}a:focus,button:focus{outline:none}br{margin:1em}article{flex:1;min-width:0}article p,article ul,article ol,article dl,article td{hyphens:auto;text-align:justify}nav#menu{width:100%;padding:0;background-color:var(--white);border-bottom:2px solid var(--highlight-color);font-family:sans-serif;font-size:1.3em}nav#menu div.menu-container{display:flex}nav#menu div.menu-container ul{display:flex;flex-direction:row;align-items:center;padding:0;list-style:none}nav#menu div.menu-container ul li a{text-decoration:none}nav#menu div.menu-container ul li a svg{height:1em}nav#menu div.menu-container ul li a.active{border-width:0 0 2px;border-style:solid;border-color:var(--highlight-color)}nav#menu div.menu-container ul#home{padding-left:0;padding-right:10px}nav#menu div.menu-container ul#home .title{font-weight:700}nav#menu div.menu-container ul#main{margin-left:auto}nav#menu div.menu-container ul#main li{padding-left:20px}@media(max-width:600px){nav#menu div.menu-container ul#main{flex-direction:column;align-items:flex-end;margin:5px 10px 0 auto}}footer#page-footer{position:absolute;bottom:0;left:0;right:0;height:2em;display:flex;justify-content:space-between;font-size:.8em;font-weight:200;line-height:1em;border-top:1px solid #ccc}footer#page-footer section{padding-left:1em;padding-right:1em;padding-top:.5em;width:100%}footer#page-footer .copyright{text-align:left}footer#page-footer .poweredby{text-align:right}@media(max-width:450px){footer#page-footer{flex-direction:column;align-items:flex-start}footer#page-footer section{text-align:initial!important;width:initial}}aside.toc{display:none}@media(min-width:1100px){aside.toc{display:initial;position:sticky;top:0;min-width:200px;max-width:350px;padding-right:1em;align-self:flex-start;hyphens:auto}aside.toc header{margin-top:1em;font-weight:700}aside.toc ul{list-style:none;padding:0}aside.toc ul ul{padding-left:1em;padding-bottom:.2em}aside.toc ul li{padding-bottom:.2em}aside.toc a{text-decoration:none}}article form svg,article a svg,article i svg{height:1em;position:relative;top:2px;padding-right:3px}article p svg:not(:first-child){padding-left:.25em}article header{margin-top:1em;margin-bottom:1em}article header nav{display:flex;flex-wrap:wrap}article header nav a{text-decoration:none;padding-right:7px}@media(min-width:700px){article header nav form.search{margin-left:auto}}article header nav form.search input[type=search]{padding:2px;width:250px}article header nav form.search input[type=search]:focus{border-color:var(--highlight-color);outline:solid var(--highlight-color)1px}article header nav form.search button[type=submit]{margin-left:-25px;border:none;background:initial}article .lead p{font-weight:500;font-size:1.1em}article .admonitionblock{margin-bottom:1em}article .admonitionblock td.icon{font-weight:700}article .admonitionblock td.content div:first-child p{margin-top:0}article .admonitionblock td.content div:last-child p{margin-bottom:0}@media(max-width:600px){article .admonitionblock tr{display:block;float:left;padding-left:.5em;padding-right:.5em}article .admonitionblock tr td{display:block}}@media(min-width:600px){article .admonitionblock td.icon{width:75px;text-align:center;border-right:1px solid var(--gray-highlight-color)}article .admonitionblock td.content{padding-left:.5em}}article .exampleblock{margin-top:1em;margin-bottom:1em}article .exampleblock .title{font-style:italic}article a.github-example{text-decoration:none}article a.github-example svg{height:.8em;position:relative;top:2px}article .playground-example .title,article .godbolt-example .title{position:relative}article .playground-example .title a,article .godbolt-example .title a{position:absolute;top:7px;right:7px}article .playground-example .title a svg,article .godbolt-example .title a svg{height:1em}article details{margin-bottom:1em}article details summary{font-style:italic}article ul p,article ol p{margin:.2em}article div ul:not(:first-child),article div ol:not(:first-child){margin-top:0}article dl dt{margin-top:.5em;font-weight:700}article dl dd p,article dl dd div:only-child ul{margin:0;padding:0}article div dl:not(:first-child){margin-top:0}article table.tableblock{background:var(--white);margin:0 auto;border-collapse:collapse}article table.tableblock td,article table.tableblock th{border:1px solid var(--gray-highlight-color);padding:5px;text-align:left}article table.tableblock td p,article table.tableblock th p{margin:0}article div.sidebarblock{border:1px solid var(--gray-highlight-color);padding:.75em;margin:1em}article div.sidebarblock p{margin:0}article code{font-family:Inconsolata,monospace,sans-serif}article pre{margin-top:0;overflow:auto;padding:10px;background:var(--white);border:1px solid var(--gray-highlight-color);line-height:1.1}article .colist{margin-top:-.5em}article .colist ol{counter-reset:list}article .colist ol li{counter-increment:list;padding-left:1em}article .colist ol ::marker{content:"(" counter(list)")";font-weight:700}article .colist p{margin:0}.highlight .c,.highlight .cm,.highlight .cp,.highlight .c1,.highlight .cs,.ace_editor .c,.ace_editor .cm,.ace_editor .cp,.ace_editor .c1,.ace_editor .cs{color:#998;font-style:italic;font-weight:initial}.highlight .k,.highlight .kc,.highlight .kd,.highlight .kp,.highlight .kr,.highlight .kt,.highlight .ace_storage,.highlight .ace_keyword,.ace_editor .k,.ace_editor .kc,.ace_editor .kd,.ace_editor .kp,.ace_editor .kr,.ace_editor .kt,.ace_editor .ace_storage,.ace_editor .ace_keyword{color:#458;font-style:initial;font-weight:700}.highlight .o,.highlight .p,.highlight .ace_keyword.ace_operator,.highlight .ace_paren,.highlight .ace_punctuation,.ace_editor .o,.ace_editor .p,.ace_editor .ace_keyword.ace_operator,.ace_editor .ace_paren,.ace_editor .ace_punctuation{color:red;font-style:initial;font-weight:initial}.highlight .ace_dsl,.ace_editor .ace_dsl{pointer-events:auto}.highlight .m,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo,.highlight .ace_constant,.ace_editor .m,.ace_editor .mf,.ace_editor .mh,.ace_editor .mi,.ace_editor .mo,.ace_editor .ace_constant{color:#ff8000;font-style:initial;font-weight:initial}.highlight .s,.highlight .sb,.highlight .sc,.highlight .sd,.highlight .s2,.highlight .s3,.highlight .sh,.highlight .si,.highlight .sx,.highlight .sr,.highlight .s1,.highlight .ss,.highlight .se,.highlight .ace_string,.ace_editor .s,.ace_editor .sb,.ace_editor .sc,.ace_editor .sd,.ace_editor .s2,.ace_editor .s3,.ace_editor .sh,.ace_editor .si,.ace_editor .sx,.ace_editor .sr,.ace_editor .s1,.ace_editor .ss,.ace_editor .se,.ace_editor .ace_string{color:green;font-style:initial;font-weight:initial}.highlight .cp,.highlight .cpf,.ace_editor .cp,.ace_editor .cpf{color:green;font-style:initial;font-weight:700}.highlight .err,.highlight .ace_invalid,.ace_editor .err,.ace_editor .ace_invalid{color:red;font-style:initial;font-weight:initial}.highlight strong,.ace_editor strong{font-weight:initial}.highlight strong:not(:empty)::before,.ace_editor strong:not(:empty)::before{content:"*";color:red}.highlight strong:not(:empty)::after,.ace_editor strong:not(:empty)::after{content:"*";color:red}</style></head><body><nav id=menu><div class=menu-container><ul id=home><li><a href=/><span class=title>lexy:</span> C++ parsing DSL</a></li></ul><ul id=main><li><a href=/learn/>Learn</a></li><li><a href=/reference/>Reference</a></li><li><a href=/playground/>Playground</a></li><li><a href=/download/>Download</a></li><li><a href=https://github.com/foonathan/lexy title=GitHub><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" role="img" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></a></li></ul></div></nav><main><aside class=toc><header><a href=#>Table of Contents</a></header></aside><article id=doc><header><h1>Header <code>lexy/encoding.hpp</code></h1><nav><a href=https://github.com/foonathan/lexy/blob/main/include/lexy/encoding.hpp><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" role="img" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> View source
</a><a href="https://github.com/foonathan/lexy/issues/new?title=lexy%2fencoding.hpp"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bug" class="svg-inline--fa fa-bug fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M511.988 288.9c-.478 17.43-15.217 31.1-32.653 31.1H424v16c0 21.864-4.882 42.584-13.6 61.145l60.228 60.228c12.496 12.497 12.496 32.758.0 45.255-12.498 12.497-32.759 12.496-45.256.0l-54.736-54.736C345.886 467.965 314.351 480 280 480V236c0-6.627-5.373-12-12-12h-24c-6.627.0-12 5.373-12 12v244c-34.351.0-65.886-12.035-90.636-32.108l-54.736 54.736c-12.498 12.497-32.759 12.496-45.256.0-12.496-12.497-12.496-32.758.0-45.255l60.228-60.228C92.882 378.584 88 357.864 88 336v-16H32.666C15.23 320 .491 306.33.013 288.9-.484 270.816 14.028 256 32 256h56v-58.745l-46.628-46.628c-12.496-12.497-12.496-32.758.0-45.255 12.498-12.497 32.758-12.497 45.256.0L141.255 160h229.489l54.627-54.627c12.498-12.497 32.758-12.497 45.256.0 12.496 12.497 12.496 32.758.0 45.255L424 197.255V256h56c17.972.0 32.484 14.816 31.988 32.9zM257 0c-61.856.0-112 50.144-112 112h224C369 50.144 318.856.0 257 0z"/></svg> Report an issue
</a><a href=https://github.com/foonathan/lexy/edit/main/docs/content/reference/encoding.adoc><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="edit" class="svg-inline--fa fa-edit fa-w-18" role="img" viewBox="0 0 576 512"><path fill="currentcolor" d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8.0zm162-22.9-48.8-48.8c-15.2-15.2-39.9-15.2-55.2.0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8.0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2.0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5.0 112v352c0 26.5 21.5 48 48 48h352c26.5.0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"/></svg> Edit this page</a><form class=search id=dsl-goto-form><input type=search id=dsl-goto-search placeholder="Go to..." list=dsl-goto-data autocomplete=off>
<button type=submit title=Go><svg viewBox="0 0 448 512"><path d="M438.6 278.6c12.5-12.5 12.5-32.8.0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3.0s-12.5 32.8.0 45.3L338.8 224H32c-17.7.0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8.0 45.3s32.8 12.5 45.3.0l160-160z"/></svg></button></form></nav></header><section><div class="paragraph lead"><p>Facilities for handling the encoding of an input.</p></div><div class=listingblock><div class=content><pre class="rouge highlight"><code data-lang=cpp><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=nc>T</span><span class=p>&gt;</span>
<span class=k>concept</span> <span class=n>encoding</span> <span class=o>=</span> <span class=err>…</span><span class=p>;</span></code></pre></div></div><div class=paragraph><p>An <em>encoding</em> determines the value type of the input and how it is interpreted by the rules.
Some <a href=/reference/dsl/#doc><code>rule</code> </a>s require a certain encoding.
For example, <a href=/reference/dsl/code_point/#code_point><code>lexy::dsl::code_point</code> </a> does not work with <a href=/reference/encoding/#encoding><code>lexy::default_encoding</code> </a>.
lexy supports two kinds of encodings: char encodings and node encodings.</p></div><div class=paragraph><p>A <em>char encoding</em> is an encoding where the input is a sequence of characters.
Its <em>primary character type</em> <code>::char_type</code> is the actual character type an input gives you,
but it can also have <em>secondary character types</em> which are also accepted but then internally normalized to the primary character type.
Its <em>integer type</em> <code>::int_type</code> is an integer type which can store any valid character type or a special EOF value.
If this is the same type as the primary character type, some optimizations are possible.
Char encodings are further divided into <em>text encodings</em> (the input is human readable text) and <em>byte encodings</em> (the input contains arbitrary bytes).</p></div><div class=paragraph><p>A <em>node encoding</em> is an encoding where the input is already parsed into a <a href=/reference/parse_tree/#parse_tree><code>lexy::parse_tree</code> </a>.
Its <em>value type</em> <code>::value_type</code> is the type of the nodes in the parse tree, and its <code>::char_encoding</code> is the underlying char encoding of the parse tree.
For details about node encodings, see <a href=/reference/input/parse_tree_input/#parse_tree_input><code>lexy::parse_tree_input</code> <svg viewBox="0 0 448 512"><title>Experimental</title><path d="M437.2 403.5 319.1 215V64h7.1c13.25.0 23.1-10.75 23.1-24l-2e-4-16c0-13.25-10.75-24-23.1-24H120C106.8.0 96.01 10.75 96.01 24l-2e-4 16c0 13.25 10.75 24 23.1 24h7.1L128 215 10.8 403.5C-18.48 450.6 15.27 512 70.89 512h306.2c55.61.0 89.41-61.5 60.11-108.5zM137.1 320l48.15-77.63C189.8 237.3 191.9 230.8 191.9 224l.0651-160h63.99l-.06 160c0 6.875 2.25 13.25 5.875 18.38L309.9 320H137.1z"/></svg>
</a>.</p></div><div class=sect1><h2 id=encoding>Supported char encodings</h2><div class=sectionbody><div class=listingblock><div class=title><code>lexy/encoding.hpp</code></div><div class=content><pre class="rouge highlight"><code data-lang=cpp><span class=k>namespace</span> <span class=n>lexy</span>
<span class=p>{</span>
    <span class=k>struct</span> <span class=nc>default_encoding</span> <span class=p>{};</span> <span class=c1>// any 8-bit encoding</span>

    <span class=k>struct</span> <span class=nc>ascii_encoding</span> <span class=p>{};</span>       <span class=c1>// ASCII</span>
    <span class=k>struct</span> <span class=nc>utf8_encoding</span>  <span class=p>{};</span>       <span class=c1>// UTF-8, char8_t</span>
    <span class=k>struct</span> <span class=nc>utf8_char_encoding</span>  <span class=p>{};</span>  <span class=c1>// UTF-8, char</span>
    <span class=k>struct</span> <span class=nc>utf16_encoding</span> <span class=p>{};</span>       <span class=c1>// UTF-16</span>
    <span class=k>struct</span> <span class=nc>utf32_encoding</span> <span class=p>{};</span>       <span class=c1>// UTF-32</span>

    <span class=k>struct</span> <span class=nc>byte_encoding</span> <span class=p>{};</span> <span class=c1>// not text</span>
<span class=p>}</span></code></pre></div></div><div class="paragraph lead"><p>Tag types for the char encodings supported by lexy.</p></div><details><summary class=title>The character types</summary><div class=content><table class="tableblock frame-all grid-all stretch"><col style=width:33.3333%><col style=width:33.3333%><col style=width:33.3334%><thead><tr><th class="tableblock halign-left valign-top">Encoding</th><th class="tableblock halign-left valign-top">Primary character type</th><th class="tableblock halign-left valign-top">Secondary character type(s)</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>default_encoding</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>char</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>none</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>ascii_encoding</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>char</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock>none</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>utf8_encoding</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>char8_t</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>char</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>utf8_char_encoding</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>char</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>char8_t</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>utf16_encoding</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>char16_t</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>wchar_t</code> (Windows only)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>utf32_encoding</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>char32_t</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>wchar_t</code> (Linux and related systems)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>byte_encoding</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>unsigned char</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>char</code>, <code>std::byte</code></p></td></tr></tbody></table></div></details><div class=paragraph><p>Each tag type corresponds to the encoding indicated and it uses the character types defined in the table above.
If an encoding is specified, lexy assumes that the input is valid for this encoding and will not perform any checking unless otherwise indicated.
If the input contains invalid code units or invalid sequences of code units,
lexy may or may not generate bogus parse errors.</p></div><div class="admonitionblock note"><table><tbody><tr><td class=icon><div class=title>Note</div></td><td class=content>For example, if the input contains the byte sequence lexy uses to encode EOF,
which is never a valid code unit for the encoding, lexy will raise an unexpected EOF error before the actual end of the input.</td></tr></tbody></table></div><div class=paragraph><p><code>default_encoding</code> is used as fallback if no encoding is specified or could be deduced.
This encoding works with any 8-bit encoding where the code units <code>0x00-0x7F</code> correspond to the ASCII characters (ASCII, UTF-8, Windows code pages, etc.).
Rules that require knowledge about the actual encoding like <a href=/reference/dsl/code_point/#code_point><code>lexy::dsl::code_point</code> </a> do not work and some optimizations are impossible, as lexy has to assume that every 8-bit value is valid code unit.</p></div><div class="admonitionblock tip"><table><tbody><tr><td class=icon><div class=title>Tip</div></td><td class=content>If you know that your input is ASCII or UTF-8, use <code>ascii_encoding</code>/<code>utf8_encoding</code> instead.</td></tr></tbody></table></div><div class=paragraph><p><code>byte_encoding</code> is used to indicate that the input does not contain actual text but arbitrary bytes.
It can also be used if you’re parsing text consisting of a mix of different encodings.</p></div></div></div><div class=sect1><h2 id=deduce_encoding>Alias template <code>lexy::deduce_encoding</code></h2><div class=sectionbody><div class=listingblock><div class=title><code>lexy/encoding.hpp</code></div><div class=content><pre class="rouge highlight"><code data-lang=cpp><span class=k>namespace</span> <span class=n>lexy</span>
<span class=p>{</span>
    <span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=nc>CharT</span><span class=p>&gt;</span>
    <span class=k>using</span> <span class=n>deduce_encoding</span> <span class=o>=</span> <span class=err>…</span><span class=p>;</span>
<span class=p>}</span></code></pre></div></div><div class="paragraph lead"><p>Deduces a char encoding from the character type of a string.</p></div><details><summary class=title>Deduced encoding</summary><div class=content><table class="tableblock frame-all grid-all stretch"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Character type</th><th class="tableblock halign-left valign-top">Encoding</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>char</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>lexy::default_encoding</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>char8_t</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>lexy::utf8_encoding</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>char16_t</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>lexy::utf16_encoding</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>char32_t</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>lexy::utf32_encoding</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>unsigned char</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>lexy::byte_encoding</code></p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock><code>std::byte</code></p></td><td class="tableblock halign-left valign-top"><p class=tableblock><code>lexy::byte_encoding</code></p></td></tr></tbody></table></div></details><div class=paragraph><p>What encoding is deduced from a character type is specified in the table above.
If <code>CharT</code> is not listed there, the alias is ill-formed.</p></div><div class=paragraph><p>The encoding corresponding to <code>char</code> can be overridden by defining the macro <code>LEXY_ENCODING_OF_CHAR</code> to one of <code>lexy::default_encoding</code>, <code>lexy::ascii_encoding</code>, <code>lexy::utf8_encoding</code>, and <code>lexy::utf8_char_encoding</code>.</p></div></div></div><div class=sect1><h2 id=encoding_endianness>Enum class <code>lexy::encoding_endianness</code></h2><div class=sectionbody><div class=listingblock><div class=title><code>lexy/encoding.hpp</code></div><div class=content><pre class="rouge highlight"><code data-lang=cpp><span class=k>namespace</span> <span class=n>lexy</span>
<span class=p>{</span>
    <span class=k>enum</span> <span class=k>class</span> <span class=nc>encoding_endianness</span>
    <span class=p>{</span>
        <span class=n>little</span><span class=p>,</span>
        <span class=n>big</span><span class=p>,</span>
        <span class=n>bom</span><span class=p>,</span>
    <span class=p>};</span>
<span class=p>}</span></code></pre></div></div><div class="paragraph lead"><p>Defines the endianness of a multi-byte char encoding when necessary.</p></div><div class=paragraph><p>In memory, UTF-16 and UTF-32 can be either encoded in big or little endian.
If raw bytes need to be interpreted as code units in those encodings,
as is necessary by <code>lexy::read_file</code>, the desired endianness can be specified using <code>encoding_endianness</code>.</p></div><div class=dlist><dl><dt class=hdlist1><code>little</code></dt><dd><p>The input is stored in little endian. For single-byte encodings, this has no effect.</p></dd><dt class=hdlist1><code>big</code></dt><dd><p>The input is stored in big endian. For single-byte encodings, this has no effect.</p></dd><dt class=hdlist1><code>bom</code></dt><dd><p>The input is stored in the endianness specified by the <a href=https://en.wikipedia.org/wiki/Byte_order_mark>byte order mark (BOM)</a> at the beginning of the input.
This option has an effect only for UTF-8, UTF-16, and UTF-32.
For UTF-8, it will skip an optional BOM, but it has otherwise no effect.
If no BOM is present, it defaults to big endian.</p></dd></dl></div><div class=paragraph><p><a href=/reference/input/buffer/#make_buffer_from_raw><code>lexy::make_buffer_from_raw</code> </a> and <a href=/reference/input/file/#read_file><code>lexy::read_file</code> </a> use this enum to handle the endianness of the raw memory,
and the rule <a href=/reference/dsl/bom/#bom><code>lexy::dsl::bom</code> </a> uses it to specify a given BOM.</p></div></div></div></section><section id=see-also><h2>See also</h2><ul><li><a href=/reference/dsl/bom/#bom><code>lexy::dsl::bom</code></a></li><li><a href=/reference/dsl/code_point/#code_point><code>lexy::dsl::code_point</code></a></li><li><a href=/reference/input/buffer/#make_buffer_from_raw><code>lexy::make_buffer_from_raw</code></a></li><li><a href=/reference/parse_tree/#parse_tree><code>lexy::parse_tree</code></a></li><li><a href=/reference/input/parse_tree_input/#parse_tree_input><code>lexy::parse_tree_input</code></a></li><li><a href=/reference/input/file/#read_file><code>lexy::read_file</code></a></li><li><a href=/reference/dsl/#doc><code>rule</code></a></li></ul></section></article><datalist id=dsl-goto-data></datalist>
<script>window.addEventListener("load",async function(){var e=await(await fetch("/reference/index.json")).json(),n=document.getElementById("dsl-goto-data"),s=document.getElementById("dsl-goto-form"),t=document.getElementById("dsl-goto-search");for(let t in e){let s=document.createElement("option");t.startsWith("lexy_")?s.value=t.toUpperCase():s.value=t,n.appendChild(s)}s.addEventListener("submit",function(n){n.preventDefault();let s=e[t.value.toLowerCase()];return s?window.location.href=s:t.value="",!1})})</script></main><footer id=page-footer><section class=copyright>&copy; <a target=_blank href=https://github.com/foonathan/lexy/blob/main/LICENSE title=License>2020-2025 Jonathan Müller and lexy contributors</a></section><section class=poweredby>Made with <a target=_blank href=https://gohugo.io>Hugo</a> and <a target=_blank href=https://fontawesome.com/license>Font Awesome</a>.</section></footer></body></html>